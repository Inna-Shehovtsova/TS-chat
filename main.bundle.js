/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";function t(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var e=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),r=()=>Math.random().toString(36).substring(7).split("").join("."),n={INIT:`@@redux/INIT${r()}`,REPLACE:`@@redux/REPLACE${r()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${r()}`};function o(t){if("object"!=typeof t||null===t)return!1;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||null===Object.getPrototypeOf(t)}function i(r,a,c){if("function"!=typeof r)throw new Error(t(2));if("function"==typeof a&&"function"==typeof c||"function"==typeof c&&"function"==typeof arguments[3])throw new Error(t(0));if("function"==typeof a&&void 0===c&&(c=a,a=void 0),void 0!==c){if("function"!=typeof c)throw new Error(t(1));return c(i)(r,a)}let s=r,u=a,l=new Map,f=l,h=0,p=!1;function d(){f===l&&(f=new Map,l.forEach(((t,e)=>{f.set(e,t)})))}function y(){if(p)throw new Error(t(3));return u}function v(e){if("function"!=typeof e)throw new Error(t(4));if(p)throw new Error(t(5));let r=!0;d();const n=h++;return f.set(n,e),function(){if(r){if(p)throw new Error(t(6));r=!1,d(),f.delete(n),l=null}}}function g(e){if(!o(e))throw new Error(t(7));if(void 0===e.type)throw new Error(t(8));if("string"!=typeof e.type)throw new Error(t(17));if(p)throw new Error(t(9));try{p=!0,u=s(u,e)}finally{p=!1}return(l=f).forEach((t=>{t()})),e}return g({type:n.INIT}),{dispatch:g,subscribe:v,getState:y,replaceReducer:function(e){if("function"!=typeof e)throw new Error(t(10));s=e,g({type:n.REPLACE})},[e]:function(){const r=v;return{subscribe(e){if("object"!=typeof e||null===e)throw new Error(t(11));function n(){const t=e;t.next&&t.next(y())}return n(),{unsubscribe:r(n)}},[e](){return this}}}}}function a(e){const r=Object.keys(e),o={};for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof e[n]&&(o[n]=e[n])}const i=Object.keys(o);let a;try{!function(e){Object.keys(e).forEach((r=>{const o=e[r];if(void 0===o(void 0,{type:n.INIT}))throw new Error(t(12));if(void 0===o(void 0,{type:n.PROBE_UNKNOWN_ACTION()}))throw new Error(t(13))}))}(o)}catch(t){a=t}return function(e={},r){if(a)throw a;let n=!1;const c={};for(let a=0;a<i.length;a++){const s=i[a],u=o[s],l=e[s],f=u(l,r);if(void 0===f)throw r&&r.type,new Error(t(14));c[s]=f,n=n||f!==l}return n=n||i.length!==Object.keys(e).length,n?c:e}}function c(...t){return 0===t.length?t=>t:1===t.length?t[0]:t.reduce(((t,e)=>(...r)=>t(e(...r))))}var s={message:"",now:Date.now(),name:""};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return(e=function(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={delay:3,messages:{isFetching:!1,didInvalidate:!1,items:[]}},d={delay:3,users:{isFetching:!1,didInvalidate:!1,items:[]}},y={isFetching:!1,didInvalidate:!1,items:[]},v={isFetching:!1,didInvalidate:!1,items:[]},g=a({message:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(f({},t),e.type){case"SET_STORAGE":return console.log("SET_STORAGE",e.storage),f(f({},t),{},{messageStorage:e.storage});case"REQUEST_MESSAGE":var r,n=null!==(r=e.id)&&void 0!==r?r:0,o=Object.assign({},y);return o.isFetching=!0,o.didInvalidate=!1,f(f({},t),{},{messages:o,selectedID:n});case"TYPE_MESSAGE":var i,a={isSend:!1,message:null!==(i=e.message)&&void 0!==i?i:s,error:""};return f(f({},t),{},{messageSend:a});case"SEND_MESSAGE":var c,u={isSend:!0,message:null!==(c=e.message)&&void 0!==c?c:s,error:""};return f(f({},t),{},{messageSend:u});case"REQUEST_MESSAGES":var l;console.log("REQUEST_MESSAGES");var h=null!==(l=e.theme)&&void 0!==l?l:"",d=Object.assign({},y);return d.isFetching=!0,d.didInvalidate=!1,f(f({},t),{},{messages:d,selectTheme:h});case"RECEIVE_MESSAGES":case"RECEIVE_ERROR":var v,g,m,b;console.log("RECEIVE_MESSAGES");var w=null!==(v=e.theme)&&void 0!==v?v:"",E=null!==(g=e.receivedAt)&&void 0!==g?g:Date.now(),S=null!==(m=e.messages)&&void 0!==m?m:[],O=null!==(b=e.error)&&void 0!==b?b:"",j=e.id,L=Object.assign({},y,{lastUpdated:E,items:S,error:O});return L.isFetching=!1,f(f({},t),{},{messages:L,selectTheme:w,selectedID:j});default:return t}},users:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(f({},t),e.type){case"REQUEST_USERS":e.theme;var r=Object.assign({},v);return r.isFetching=!0,f(f({},t),{},{users:r});case"RECEIVE_USERS":case"RECEIVE_ERROR_USER":var n,o,i,a=null!==(n=e.receivedAt)&&void 0!==n?n:Date.now(),c=null!==(o=e.items)&&void 0!==o?o:[],s=null!==(i=e.error)&&void 0!==i?i:"",u=Object.assign({},v,{lastUpdated:a,items:c,error:s,isFetching:!1});return f(f({},t),{},{users:u});default:return t}}});function m(t){return({dispatch:e,getState:r})=>n=>o=>"function"==typeof o?o(e,r,t):n(o)}var b=m(),w=m,E="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?c:c.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var S=class t extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,t.prototype)}static get[Symbol.species](){return t}concat(...t){return super.concat.apply(this,t)}prepend(...e){return 1===e.length&&Array.isArray(e[0])?new t(...e[0].concat(this)):new t(...e.concat(this))}},O=t=>e=>{setTimeout(e,t)},j="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:O(10),{assign:L}=Object;function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function x(){x=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:P(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(A([])));S&&S!==r&&n.call(S,a)&&(w=S);var O=b.prototype=g.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==_(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=T(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},j(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){N(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function N(t,e,r){return(e=function(t){var e=function(t){if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function k(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){R(i,n,o,a,c,"next",t)}function c(t){R(i,n,o,a,c,"throw",t)}a(void 0)}))}}Symbol.for("rtk-state-proxy-original");var A={firebaseBaseUrl:"https://otus-js-chat-4ed79-default-rtdb.firebaseio.com",firebaseCollection:"messages.json"};function I(){return D.apply(this,arguments)}function D(){return D=k(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(A.firebaseBaseUrl,"/").concat(A.firebaseCollection),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return Object.values(t).map((function(t){return T(T({},t),{},{date:new Date(t.date)})}))})));case 1:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function M(t){return C.apply(this,arguments)}function C(){return(C=k(x().mark((function t(e){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(A.firebaseBaseUrl,"/").concat(A.firebaseCollection),{method:"POST",body:JSON.stringify(T(T({},e),{},{date:new Date})),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}window.sendMessage=M,window.getMessagesList=I,window.observeWithXHR=function(t){var e=new XMLHttpRequest,r=0;e.addEventListener("progress",(function(){var n=e.response.substr(r);r=e.response.length;var o=n.match(/event: (.+)/)[1],i=JSON.parse(n.match(/data: (.+)/)[1]);"put"===o&&t(i.data)})),e.open("POST","".concat(A.firebaseBaseUrl,"/").concat(A.firebaseCollection),!0),e.setRequestHeader("Accept","text/event-stream"),e.send()},window.observeWithEventSource=function(t){new EventSource("".concat(A.firebaseBaseUrl,"/").concat(A.firebaseCollection)).addEventListener("put",(function(e){return t(JSON.parse(e.data).data)}))};var G="REQUEST_MESSAGES",U="RECEIVE_MESSAGES",F="RECEIVE_USERS",q="SEND_MESSAGE",H="TYPE_MESSAGE";function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function B(){B=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(R([])));S&&S!==r&&n.call(S,a)&&(w=S);var O=b.prototype=g.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==V(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=x(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(V(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},j(L.prototype),u(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach((function(e){Y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Y(t,e,r){return(e=function(t){var e=function(t){if("object"!=V(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function W(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Q(i,n,o,a,c,"next",t)}function c(t){Q(i,n,o,a,c,"throw",t)}a(void 0)}))}}var K=document.querySelector("#app"),J=document.querySelector("#users"),z=function(e){const r=function(t){const{thunk:e=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:o=!0}=t??{};let i=new S;return e&&("boolean"==typeof e?i.push(b):i.push(w(e.extraArgument))),i},{reducer:n,middleware:s,devTools:u=!0,preloadedState:l,enhancers:f}=e||{};let h,p;if("function"==typeof n)h=n;else{if(!o(n))throw new Error(`Minified Redux Toolkit error #${d=1}; visit https://redux-toolkit.js.org/Errors?code=${d} for the full message or use the non-minified dev environment for full errors. `);h=a(n)}var d;p="function"==typeof s?s(r):r();let y=c;u&&(y=E({trace:!1,..."object"==typeof u&&u}));const v=function(...e){return r=>(n,o)=>{const i=r(n,o);let a=()=>{throw new Error(t(15))};const s={getState:i.getState,dispatch:(t,...e)=>a(t,...e)},u=e.map((t=>t(s)));return a=c(...u)(i.dispatch),{...i,dispatch:a}}}(...p),g=(t=>function(e){const{autoBatch:r=!0}=e??{};let n=new S(t);return r&&n.push(((t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let o=!0,i=!1,a=!1;const c=new Set,s="tick"===t.type?queueMicrotask:"raf"===t.type?j:"callback"===t.type?t.queueNotification:O(t.timeout),u=()=>{a=!1,i&&(i=!1,c.forEach((t=>t())))};return Object.assign({},n,{subscribe(t){const e=n.subscribe((()=>o&&t()));return c.add(t),()=>{e(),c.delete(t)}},dispatch(t){try{return o=!t?.meta?.RTK_autoBatch,i=!o,i&&(a||(a=!0,s(u))),n.dispatch(t)}finally{o=!0}}})})("object"==typeof r?r:void 0)),n})(v);return i(h,l,y(..."function"==typeof f?f(g):g()))}({reducer:g,middleware:function(t){return t({serializableCheck:!1})}});function Z(){return function(t,e){t({type:G,theme:""}),console.log("request messate"),I().then((function(e){console.log("before");var r=e.sort((function(t,e){return e.date.valueOf()>t.date.valueOf()?1:-1}));t({type:U,theme:"",messages:r,receivedAt:Date.now()});var n=new Array;e.forEach((function(t){t.name&&n.push(t.name.trim())}));var o,i=new Set(n);t((o=Array.from(i).sort((function(t,e){return t>e?1:t<e?-1:0})),{type:F,items:o,receivedAt:Date.now()})),console.log("after")}))}}function tt(t){return function(e,r){e({type:H,message:t}),console.log("type messate"),M(t).then((function(){console.log("before send"),e({type:q,message:t}),console.log("after send")}))}}function et(){return rt.apply(this,arguments)}function rt(){return(rt=W(B().mark((function t(){return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("load data"),z.dispatch(Z()),console.log("load data2");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nt(){return ot.apply(this,arguments)}function ot(){return(ot=W(B().mark((function t(){var e,r,n;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=document.querySelector(".text_input"),r=document.querySelector(".text_name"),console.log("load data"),n={message:e.value,name:r.value,now:Date.now()},z.dispatch(tt(n)),console.log("load data2");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var it=function(t){var e,r;if(console.log("render",t),K.innerHTML='<p><button class="load">Load data</button></p>\n     <input class="text_input" value="message text"></input>\n    <input class="text_name" value="name"></input>\n    <p><button class="send">Send message</button></p>\n      \n    <p class="theme"></p>\n    <h1 style="color: red" class="error"></h1>\n    <ul class="messages"></ul>',t.isSended){var n=K.querySelector(".send");null==n||n.classList.add("hide")}else{var o=K.querySelector(".send");null==o||o.classList.remove("hide")}if(t.isLoading){var i=K.querySelector("ul");i&&(i.innerHTML="Messages is not loaded yet")}if(t.theme){var a=K.querySelector(".theme");a&&(a.innerHTML="Selected is ".concat(t.theme," "))}if(t.error){var c=K.querySelector(".error");c&&(c.innerHTML="".concat(t.error))}if(t.data.length>0)for(var s=K.querySelector(".messages"),u=0;u<t.data.length;u++){var l,f=$({},t.data[u]),h=document.createElement("li");h.innerHTML='<p class="username">'.concat(f.name,'</p>\n                        <p class="text">').concat(f.message,'</p>\n                        <p class="time">').concat(null===(l=f.date)||void 0===l?void 0:l.toDateString(),"</p>"),s&&s.appendChild(h)}null===(e=K.querySelector(".load"))||void 0===e||e.addEventListener("click",et),null===(r=K.querySelector(".send"))||void 0===r||r.addEventListener("click",nt)},at=function(t){return{isLoading:t.users.users.isFetching,data:t.users.users.items,error:t.users.users.error}},ct=function(t){if(console.log("users",t),t.isLoading)return J.innerHTML="users is loading";if(t.data){J.innerHTML='<ul class="usersL"></ul>';for(var e=J.querySelector(".usersL"),r=0;r<t.data.length;r++){console.log(t.data[r]);var n=document.createElement("li");n.innerHTML='<p class="username">'.concat(t.data[r],"</p>"),e&&e.appendChild(n)}return J}return t.error?J.innerHTML="<pre>".concat(t.error,"</pre>"):void 0},st=function(t){return{isLoading:t.message.messages.isFetching,data:t.message.messages.items,error:t.message.messages.error,theme:t.message.selectedTheme,isSended:!1}};it(st(z.getState())),ct(at(z.getState())),z.dispatch((function(t,e){if(function(t){var e,r,n,o=t(),i=Date.now()+o.message.delay,a=""===(null!==(e=o.message.selectedTheme)&&void 0!==e?e:""),c=o.message.messages.didInvalidate,s=null!==(r=o.message.messages.lastUpdated)&&void 0!==r?r:0;return!a||(a&&(s=null!==(n=o.message.messages.lastUpdated)&&void 0!==n?n:0,c=o.message.messages.didInvalidate),i>s||c)}(e))return t(Z())})),z.subscribe((function(){return it(st(z.getState()))})),z.subscribe((function(){return ct(at(z.getState()))}))})();
//# sourceMappingURL=main.bundle.js.map